<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thai Consonant Drill</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #f3f4f6;
            --card-bg: #ffffff;
            --text-color: #1f2937;
            --success-color: #10b981;
            --error-color: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
            text-align: center;
            position: relative; /* For modal positioning */
        }

        header {
            margin-bottom: 2rem;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        h1 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        /* Hearts and Score Bar */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8fafc;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
        }

        .hearts {
            font-size: 1.5rem;
            letter-spacing: 5px;
        }

        .score-box {
            font-weight: bold;
            color: #4b5563;
        }

        /* The Flashcard Area */
        .character-display {
            font-size: 8rem;
            font-weight: bold;
            margin: 1rem 0;
            height: 160px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Sarabun', 'Thonburi', sans-serif; 
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: #4b5563;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        button {
            background-color: white;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-color);
        }

        button:hover {
            border-color: var(--primary-color);
            background-color: #eff6ff;
        }

        /* State Classes */
        button.correct {
            background-color: var(--success-color) !important;
            color: white !important;
            border-color: var(--success-color) !important;
        }

        button.wrong {
            background-color: var(--error-color) !important;
            color: white !important;
            border-color: var(--error-color) !important;
        }

        .feedback-msg {
            height: 1.5rem;
            margin-top: 1rem;
            font-weight: bold;
        }
        
        .feedback-correct { color: var(--success-color); }
        .feedback-wrong { color: var(--error-color); }

        /* Game Over Modal */
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            display: none; /* Hidden by default */
        }

        .modal-content h2 {
            color: var(--error-color);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .modal-content p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        .restart-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.2rem;
            border-radius: 0.5rem;
            cursor: pointer;
        }

        .restart-btn:hover {
            background-color: #1d4ed8;
        }

        @media (max-width: 400px) {
            .options-grid { grid-template-columns: 1fr; }
            .character-display { font-size: 6rem; }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="container">
        <div id="game-over-modal" class="modal-overlay">
            <div class="modal-content">
                <h2>Game Over!</h2>
                <p>Final Score: <span id="final-score">0</span></p>
                <button class="restart-btn" onclick="restartGame()">Play Again</button>
            </div>
        </div>

        <header>
            <h1>Thai Consonant Drill</h1>
            <div class="top-bar">
                <div class="hearts" id="hearts-display">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
                <div class="score-box" id="score">Score: 0</div>
            </div>
        </header>

        <div class="character-display" id="char-display">?</div>

        <p class="question-text">Select the correct name:</p>

        <div class="options-grid" id="options-container"></div>

        <div class="feedback-msg" id="feedback"></div>
    </div>

    <script>
        const consonants = [
            { char: "‡∏Å", name: "Ko Kai", meaning: "Chicken" },
            { char: "‡∏Ç", name: "Kho Khai", meaning: "Egg" },
            { char: "‡∏É", name: "Kho Khuat", meaning: "Bottle" },
            { char: "‡∏Ñ", name: "Kho Khwai", meaning: "Buffalo" },
            { char: "‡∏Ö", name: "Kho Khon", meaning: "Person" },
            { char: "‡∏Ü", name: "Kho Rakhang", meaning: "Bell" },
            { char: "‡∏á", name: "Ngo Ngu", meaning: "Snake" },
            { char: "‡∏à", name: "Cho Chan", meaning: "Plate" },
            { char: "‡∏â", name: "Cho Ching", meaning: "Cymbals" },
            { char: "‡∏ä", name: "Cho Chang", meaning: "Elephant" },
            { char: "‡∏ã", name: "So So", meaning: "Chain" },
            { char: "‡∏å", name: "Cho Choe", meaning: "Tree" },
            { char: "‡∏ç", name: "Yo Ying", meaning: "Woman" },
            { char: "‡∏é", name: "Do Chada", meaning: "Headdress" },
            { char: "‡∏è", name: "To Patak", meaning: "Goad/Spear" },
            { char: "‡∏ê", name: "Tho Than", meaning: "Pedestal" },
            { char: "‡∏ë", name: "Tho Montho", meaning: "Montho" },
            { char: "‡∏í", name: "Tho Phuthao", meaning: "Elder" },
            { char: "‡∏ì", name: "No Nen", meaning: "Novice Monk" },
            { char: "‡∏î", name: "Do Dek", meaning: "Child" },
            { char: "‡∏ï", name: "To Tao", meaning: "Turtle" },
            { char: "‡∏ñ", name: "Tho Thung", meaning: "Sack" },
            { char: "‡∏ó", name: "Tho Thahan", meaning: "Soldier" },
            { char: "‡∏ò", name: "Tho Thong", meaning: "Flag" },
            { char: "‡∏ô", name: "No Nu", meaning: "Mouse" },
            { char: "‡∏ö", name: "Bo Baimai", meaning: "Leaf" },
            { char: "‡∏õ", name: "Po Pla", meaning: "Fish" },
            { char: "‡∏ú", name: "Pho Phueng", meaning: "Bee" },
            { char: "‡∏ù", name: "Fo Fa", meaning: "Lid" },
            { char: "‡∏û", name: "Pho Phan", meaning: "Tray" },
            { char: "‡∏ü", name: "Fo Fan", meaning: "Teeth" },
            { char: "‡∏†", name: "Pho Samphao", meaning: "Sailboat" },
            { char: "‡∏°", name: "Mo Ma", meaning: "Horse" },
            { char: "‡∏¢", name: "Yo Yak", meaning: "Giant" },
            { char: "‡∏£", name: "Ro Ruea", meaning: "Boat" },
            { char: "‡∏•", name: "Lo Ling", meaning: "Monkey" },
            { char: "‡∏ß", name: "Wo Waen", meaning: "Ring" },
            { char: "‡∏®", name: "So Sala", meaning: "Pavilion" },
            { char: "‡∏©", name: "So Ruesi", meaning: "Hermit" },
            { char: "‡∏™", name: "So Suea", meaning: "Tiger" },
            { char: "‡∏´", name: "Ho Hip", meaning: "Chest/Box" },
            { char: "‡∏¨", name: "Lo Chula", meaning: "Kite" },
            { char: "‡∏≠", name: "O Ang", meaning: "Basin" },
            { char: "‡∏Æ", name: "Ho Nokhuk", meaning: "Owl" }
        ];

        let currentItem = null;
        let score = 0;
        let lives = 3;
        let isAnswering = true;

        // Elements
        const charDisplay = document.getElementById('char-display');
        const optionsContainer = document.getElementById('options-container');
        const scoreDisplay = document.getElementById('score');
        const heartsDisplay = document.getElementById('hearts-display');
        const feedbackDisplay = document.getElementById('feedback');
        const modal = document.getElementById('game-over-modal');
        const finalScoreSpan = document.getElementById('final-score');

        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function updateHearts() {
            // Render hearts based on 'lives' count
            let heartString = "";
            for(let i=0; i<lives; i++) {
                heartString += "‚ù§Ô∏è";
            }
            // Add broken hearts for lost lives (optional visual style)
            for(let i=lives; i<3; i++) {
                heartString += "üñ§";
            }
            heartsDisplay.textContent = heartString;
        }

        function restartGame() {
            score = 0;
            lives = 3;
            scoreDisplay.textContent = `Score: 0`;
            updateHearts();
            modal.style.display = 'none'; // Hide modal
            generateQuestion();
        }

        function generateQuestion() {
            isAnswering = true;
            feedbackDisplay.textContent = "";
            feedbackDisplay.className = "feedback-msg";
            optionsContainer.innerHTML = "";

            const correctIndex = getRandomInt(consonants.length);
            currentItem = consonants[correctIndex];

            // Generate Distractors
            let options = [currentItem];
            while (options.length < 4) {
                let randomDistractor = consonants[getRandomInt(consonants.length)];
                if (!options.includes(randomDistractor)) {
                    options.push(randomDistractor);
                }
            }
            shuffleArray(options);

            // Update UI
            charDisplay.textContent = currentItem.char;

            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.textContent = `${opt.name} (${opt.meaning})`;
                btn.onclick = () => checkAnswer(opt, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selected, btnElement) {
            if (!isAnswering) return;
            isAnswering = false; // Block clicks

            const buttons = optionsContainer.querySelectorAll('button');

            if (selected.char === currentItem.char) {
                // Correct
                score++;
                btnElement.classList.add('correct');
                feedbackDisplay.textContent = "Correct!";
                feedbackDisplay.classList.add('feedback-correct');
                scoreDisplay.textContent = `Score: ${score}`;
                
                // Next Question
                setTimeout(() => {
                    generateQuestion();
                }, 1000);

            } else {
                // Wrong
                lives--;
                updateHearts();
                
                btnElement.classList.add('wrong');
                feedbackDisplay.textContent = `Wrong! It was ${currentItem.name}`;
                feedbackDisplay.classList.add('feedback-wrong');

                // Highlight correct answer
                buttons.forEach(b => {
                    if (b.textContent.includes(currentItem.name)) {
                        b.classList.add('correct');
                    }
                });

                if (lives <= 0) {
                    // Game Over Logic
                    setTimeout(() => {
                        finalScoreSpan.textContent = score;
                        modal.style.display = 'flex'; // Show Modal
                    }, 1000);
                } else {
                    // Continue Game
                    setTimeout(() => {
                        generateQuestion();
                    }, 1500);
                }
            }
        }

        // Start
        updateHearts();
        generateQuestion();

    </script>
</body>
</html>
